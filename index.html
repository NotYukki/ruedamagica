<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>üé¥ Rueda Magica</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(-45deg, #ff6ec4, #7873f5, #42e695, #f4f4f4);
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
      color: white;
    }

    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    h1 {
      font-size: 40px;
      margin-bottom: 20px;
      text-shadow: 2px 2px 6px #000;
    }

    canvas {
      width: 600px;
      height: 600px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(8px);
      box-shadow: 0 0 30px rgba(0,0,0,0.4);
    }

    button {
      margin: 12px;
      padding: 14px 32px;
      font-size: 18px;
      font-weight: bold;
      background: linear-gradient(135deg, #00adb5, #007b7f);
      color: white;
      border: none;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 16px rgba(0,0,0,0.4);
    }

    button:disabled {
      background: #007b7f;
      cursor: wait;
    }

    #result {
      font-size: 32px;
      margin-top: 20px;
      text-shadow: 1px 1px 3px #000;
    }
  </style>
</head>
<body>
  <h1>üé° Roue de l'arnaque</h1>
  <canvas id="wheel" width="600" height="600"></canvas>
  <div id="result">‚ùì</div>
  <button id="spinBtn">üéØ Tourner</button>
  <button id="removeBtn" disabled>üóëÔ∏è Dehors</button>
  <button id="randomWordBtn">üìñ Mot espagnol</button>

  <audio id="randomSound" preload="auto"></audio>
  <audio id="explosionSound" src="https://www.soundjay.com/explosion/sounds/explosion-01.mp3" preload="auto"></audio>

  <script>
    const prenoms = {
      "Ismael": 20, "Lavrin": 20, "Sean": 20, "Lou": 20, "Sarah": 20,
      "Mohamed": 20, "Tom": 20, "Younes": 20, "Lina": 20, "Mathis": 20,
      "Leo": 20, "Mathias": 20, "Idriss": 20, "Amir": 20, "Yoann": 20,
      "Ewan": 20, "Sakina": 20, "Sairam": 20, "Steven": 20, "Ruben": 20,
      "Guillaume": 20, "Dorian": 20, "Corentin": 20
    };

    const motsEspagnols = [
  "los extranjeros", "soler + inf", "creer en", "una creencia", "mostrar(ue)",
  "plantearse preguntas", "reflejar", "un reflejo", "a menudo", "dormir la siesta",
  "las tapas", "bailar", "el baile", "la corrida de toros", "a lo mejor + inf",
  "el baloncesto", "el deporte", "los molinos de viento", "el AVE", "mejorar",
  "promover", "atraer", "los turistas", "un dominio", "contradecir", "la innovaci√≥n",
  "innovar", "un pa√≠s de vanguardia", "un torero", "un traje de luces", "una olla expr√©s",
  "las zapatos de tac–æÃÅn", "un estoque", "una espada", "una montera", "el pintalabios",
  "original", "tradicional", "moderno", "ir√≥nico", "burl–æÃÅn/burlona", "provocador",
  "absurdo", "estupendo", "comprometido", "una cultura", "mezclar", "el origen",
  "la religi√≥n", "costumbres", "sociabilizar", "estar juntos", "acoger", "el respeto",
  "respetar", "aceptar", "los valores", "la tolerancia", "la igualdad", "ayudar",
  "las minor√≠as", "el ingl√©s", "un idioma", "una lengua", "una bandera", "una fachada",
  "los Estados Unidos", "EEUU", "estadounidense", "un mural", "un √°guila", "una estrella",
  "un lugar", "adaptar", "expresar", "hispanohablante", "esconder", "una cadena de tele",
  "un periodista", "tachar", "racista", "los mexicanos", "dirigirse a", "pegar",
  "dar clases", "proponer", "proceder de", "venir de", "tener que", "deber",
  "un territorio", "partenecer a", "una ra√≠z", "sufrir", "el sufrimiento", "una tienda",
  "un negocio", "un acto de odio", "el odio", "odiar", "insultar a alguien",
  "un supremacista", "discriminar", "cada vez m√°s", "los documentos", "el saber",
  "s√≠ mismo", "el arte", "las artes", "comprar", "un castillo", "una catedral",
  "un soldado", "las escaleras", "una pel√≠cula", "una serie", "delante de",
  "un caballo", "un monje", "la Edad Media", "rodar", "el rodaje", "conquistar",
  "la paz", "el ruido", "la naturaleza", "un paisaje", "el tesoro", "en cuanto a",
  "ambos", "un aumento", "aumentar", "el n√∫mero", "gastar", "desempe√±ar un papel",
  "maravillarse", "una maravilla", "formar parte de", "preservar", "los dioses",
  "ind√≠gena", "pertenecer", "el encuentro", "encontrar", "ofrecer", "una ofrenda",
  "ingenuo", "la ingenuidad", "una calavera", "besar", "abrazar", "un abrazo",
  "un coraz√≥n", "el ma√≠z", "un acontecimiento", "una masacre", "un aniversario",
  "cumplea√±os", "la conquista", "un punto de vista", "oponer", "opuesto",
  "el imperio", "el emperador", "la explotaci√≥n", "explotar", "el pueblo ind√≠gena",
  "algunos", "los europeos", "navegar", "la navegaci√≥n", "el peligro", "peligroso",
  "los marineros", "una cruz", "el oc√©ano", "tener hambre", "bastante", "so√±ar",
  "una leyenda", "tener lugar", "cerca", "admirar", "el almirante", "estar decepcionado",
  "un manat√≠", "la tripulacion", "desconocer", "una traici√≥n", "traicionar",
  "un asesinato", "asesinar", "un rescate", "el oro", "tomar", "buscar", "matar",
  "esconder", "un grabado", "la creatividad", "un artista", "el mecenazgo",
  "una escultura", "pintar", "una obra", "un mensaje", "la propaganda", "el gobierno",
  "la dictadura", "el ej√©rcito", "la meta", "un obrero", "robar", "un ladr√≥n",
  "el ayuntamiento", "ense√±ar", "apprendre", "un muralista", "una pared",
  "deshumanizar", "la deshumanizaci–æÃÅn", "recordar", "el apoyo", "difundir",
  "la herencia", "tomar distancia con", "una herida", "por primera vez",
  "transmitir", "merecer"
];


    let pool = genererPool();
    let dernierPrenom = "";

    const canvas = document.getElementById('wheel');
    const ctx = canvas.getContext('2d');
    const spinBtn = document.getElementById('spinBtn');
    const removeBtn = document.getElementById('removeBtn');
    const result = document.getElementById('result');
    const randomSound = document.getElementById('randomSound');
    const explosionSound = document.getElementById('explosionSound');

    const center = canvas.width / 2;
    const radius = center - 20;
    const colors = ['#FF6384', '#36A2EB', '#FFCE56', '#9CCC65', '#FF8A65', '#BA68C8'];

    function genererPool() {
      const pool = [];
      for (const [nom, poids] of Object.entries(prenoms)) {
        for (let i = 0; i < poids; i++) pool.push(nom);
      }
      return pool;
    }

    function tirerPrenom() {
      if (pool.length === 0) return null;
      let choisi;
      do {
        const index = Math.floor(Math.random() * pool.length);
        choisi = pool[index];
      } while (choisi === dernierPrenom && pool.length > 1);
      dernierPrenom = choisi;
      return choisi;
    }

    function dessinerRoue(noms, angleOffset = 0) {
      const total = noms.length;
      const angleParNom = 2 * Math.PI / total;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      noms.forEach((nom, i) => {
        const angleStart = angleOffset + i * angleParNom;
        const angleEnd = angleStart + angleParNom;
        ctx.beginPath();
        ctx.moveTo(center, center);
        ctx.arc(center, center, radius, angleStart, angleEnd);
        ctx.fillStyle = colors[i % colors.length];
        ctx.fill();
        ctx.save();
        ctx.translate(center, center);
        ctx.rotate(angleStart + angleParNom / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#fff";
        ctx.font = "18px Arial";
        ctx.fillText(nom, radius - 20, 8);
        ctx.restore();
      });
    }

    function jouerSonAleatoire() {
      const numero = Math.floor(Math.random() * 24) + 1;
      randomSound.src = `${numero}.mp3`;
      randomSound.play().catch(e => console.warn("Erreur audio :", e));
    }

    const nomsVisibles = Object.keys(prenoms);
    dessinerRoue(nomsVisibles);

    spinBtn.addEventListener('click', () => {
      if (nomsVisibles.length === 0) return;
      spinBtn.disabled = true;
      result.textContent = "‚è≥";

      const nomChoisi = tirerPrenom();
      if (!nomChoisi) {
        result.textContent = "üéâ Tous les pr√©noms ont √©t√© tir√©s !";
        return;
      }

      const indexChoisi = nomsVisibles.indexOf(nomChoisi);
      const angleParNom = 2 * Math.PI / nomsVisibles.length;
      const angleCible = (3 * Math.PI / 2) - (indexChoisi * angleParNom + angleParNom / 2);
      const tours = 7;
      const angleFinal = tours * 2 * Math.PI + angleCible;

      let angle = 0;
      let start = null;
      const dureeAnimation = 6000;

      jouerSonAleatoire();

      function animer(timestamp) {
        if (!start) start = timestamp;
        const progress = (timestamp - start) / dureeAnimation;
        angle = easeOutCubic(Math.min(progress, 1)) * angleFinal;
        dessinerRoue(nomsVisibles, angle);
        if (progress < 1) {
          requestAnimationFrame(animer);
        } else {
          explosionSound.currentTime = 0;
          explosionSound.play();
          result.textContent = nomChoisi;
          removeBtn.disabled = false;
          spinBtn.disabled = false;
        }
      }

      requestAnimationFrame(animer);
    });

    function easeOutCubic(t) {
      return 1 - Math.pow(1 - t, 3);
    }

    removeBtn.addEventListener("click", () => {
      if (dernierPrenom && prenoms.hasOwnProperty(dernierPrenom)) {
        delete prenoms[dernierPrenom];
        const idx = nomsVisibles.indexOf(dernierPrenom);
        if (idx !== -1) nomsVisibles.splice(idx, 1);
        pool = genererPool();
        removeBtn.disabled = true;
        result.textContent = `‚ùå ${dernierPrenom} supprim√©`;
        dessinerRoue(nomsVisibles);
      }
    });

    document.getElementById("randomWordBtn").addEventListener("click", () => {
      const mot = motsEspagnols[Math.floor(Math.random() * motsEspagnols.length)];
      result.textContent = `Traduit sa abruti ${mot}`;
    });
  </script>
</body>
</html>
